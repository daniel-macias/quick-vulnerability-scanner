'use client'
import React, { useState } from 'react';
import axios from 'axios';

export default function Home() {
  const [apiResponse, setApiResponse] = useState('');

  const fetchData = async () => {
    try {
      const response = await axios.get('https://jsonplaceholder.typicode.com/posts/1');
      setApiResponse(JSON.stringify(response.data, null, 2));
    } catch (error) {
      console.error('There was an error!', error);
    }
  };

  const handleScanClick = async () => {
    try {
      // Create a new FormData object

      console.log(process.env.NEXT_PUBLIC_VT_API_KEY);
  
      // Make a POST request to the VirusTotal API with the form data and set the "x-apikey" header
      const response = await axios.get('https://www.virustotal.com/api/v3/ip_addresses/8.8.8.8', {
        headers: {
          'x-apikey': process.env.NEXT_PUBLIC_VT_API_KEY, // Set the API key as a header
        },
      });
  
      // Extract the scan result from the response
      const scanResult = response.data;
      setApiResponse(JSON.stringify(response.data, null, 2));
      // Call the onScan callback with the result
    } catch (error) {
      console.error('Error scanning IP:', error);
      // Handle errors as needed
    }
  };

  return (
      <div className="min-h-screen grid md:grid-cols-5 max-h-screen-xl mx-auto">
        {/* Left Half */}
        
        <div className="grid md:grid-rows-6 md:col-span-3 h-full">
          {/* Left Bottom (1/6) */}

          {/* Left Top (5/6) */}
          <div className="md:row-span-6 bg-[#28282d] h-full rounded-md p-4 flex items-center justify-center">
            <div className="bg-[#28282d] h-full rounded-md p-4 flex items-center justify-center">
              {/* Content for the top left section */}
              <div>
                {/* Choose the appropriate scan component based on the currentScanType */}
                <button onClick={handleScanClick} className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                Fetch Data
                </button>
                {apiResponse && <pre className="text-white mt-4">{apiResponse}</pre>}
              </div>
            </div>
          </div>


        </div>

        {/* Right Half */}
        <div className="grid md:grid-rows-4 md:col-span-2">
          {/* Right Top (1/4) */}
          <div className="md:row-span-1 bg-[#28282d] h-full rounded-md p-4">
            <p>File Scan</p>
          </div>

          {/* Right Top (1/4) */}
          <div className="md:row-span-1 bg-[#28282d] h-full rounded-md p-4">
            <p>URL Scan</p>
          </div>

          {/* Right Top (1/4) */}
          <div className="md:row-span-1 bg-[#28282d] h-full rounded-md p-4">
            <p>IP Scan</p>
          </div>

          {/* Right Top (1/4) */}
          <div className="md:row-span-1 bg-[#28282d] h-full rounded-md p-4">
            <p>Domain Scan</p>
          </div>
        </div>
      </div>
     
  );
}
